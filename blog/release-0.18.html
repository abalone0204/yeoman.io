<!DOCTYPE html><html lang=en data-version=60e7c74><head><meta charset=utf-8><title>Yeoman generator version 0.18.0 - Release announcement | Yeoman</title><meta name=viewport content="width=device-width"><link rel=icon type=image/x-icon href=/static/favicon.b25e58c4b8.ico><link href="http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Roboto:400,700,700italic,400italic" rel=stylesheet><link rel=stylesheet href=/static/bundle-5327.4dd1f5e839.css><link href=/blog/atom.xml type=application/atom+xml rel=alternate title="Yeoman Blog Atom Feed"></head><body class=blog><header class=page-header><div class=container><div class=mobile-bar><h1 class=logo><a href="/"><img src=/static/logo.f0661e3819.png alt=Yeoman></a></h1><button class="mobile-menu-toggle ir">open</button></div><nav class=main-menu><ul class=main-nav><li><a href="/learning/">Using Yeoman</a><ul> <li><a href=/learning/index.html>Getting started</a></li> <li><a href=/codelab/index.html>Tutorial (codelab)</a></li> <li><a href=/learning/resources.html>Resources</a></li> <li><a href=/learning/deployment.html>Deployment</a></li> <li><a href=/learning/faq.html>FAQ</a></li> <li><a href=/learning/support.html>Support</a></li></ul></li><li><a href="/generators/">Discovering generators</a></li> <li><a href="/authoring/">Creating a generator</a><ul> <li><a href=/authoring/index.html>Getting started</a></li> <li><a href=/authoring/running-context.html>Running Context</a></li> <li><a href=/authoring/user-interactions.html>User Interactions</a></li> <li><a href=/authoring/composability.html>Composability</a></li> <li><a href=/authoring/dependencies.html>Managing Dependencies</a></li> <li><a href=/authoring/file-system.html>Interacting with the file system</a></li> <li><a href=/authoring/gruntfile.html>Creating a Gruntfile</a></li> <li><a href=/authoring/storage.html>Storing user configs</a></li> <li><a href=/authoring/testing.html>Unit testing</a></li> <li><a href=/authoring/debugging.html>Debugging Generators</a></li> <li><a href=/authoring/integrating-yeoman.html>Integrating Yeoman in other tools</a></li> <li><a href="http://yeoman.github.io/generator/">Full API documentation</a></li></ul></li><li><a href="/blog/" class=active>Blog</a></li> <li><a href="/contributing/">Contributing</a><ul> <li><a href=/contributing/index.html>Contributing</a></li> <li><a href=/contributing/opening-issues.html>How to open an issue</a></li> <li><a href=/contributing/pull-request.html>How to submit a PR</a></li> <li><a href=/contributing/style-guide.html>Style Guide</a></li> <li><a href=/contributing/testing-guidelines.html>Testing Guidelines</a></li> <li><a href=/contributing/ticketing.html>Issue system overview</a></li></ul></li></ul></nav></div></header><div id=content><h2 class=page-title><div class=container>Yeoman generator version 0.18.0 - Release announcement</div></h2><div class="container clearfix has-sidebar"><nav class=context-nav><ul><li><a href=/blog/archive.html>View the Archives</a></li> <li class=year_divider><a class=year_title>2015</a><ul> <li><a href=/blog/state-of-the-moustache-2015.html>State of the Moustache</a></li></ul></li><li class=year_divider><a class=year_title>2014</a><ul> <li><a href=/blog/bower_components-in-project-root.html>Why Bower_Components was moved to a Project's Root Directory</a></li> <li><a href=/blog/release-0.18.html>Yeoman generator version 0.18.0 - Release announcement</a></li> <li><a href=/blog/generator-karma-rewrite.html>Karma Generator Rewrite 0.8.0</a></li> <li><a href=/blog/generator-0.17.html>Yeoman Generator 0.17.0 prerelease 1</a></li> <li><a href=/blog/releases-march-7th.html>Yeoman updates for Friday, March 7th.</a></li> <li><a href=/blog/performance-optimization.html>Grunt And Gulp Tasks For Performance Optimization</a></li> <li><a href=/blog/whats-new-in-backbone-generator.html>What's new in the Backbone generator</a></li> <li><a href=/blog/generator-update-feb-0207.html>Updates to some of our generators</a></li> <li><a href=/blog/gulp-explore.html>Exploring A Generator For Gulp.js</a></li> <li><a href=/blog/cleanup.html>Generators New Year Cleanup!</a></li></ul></li><li class=year_divider><a class=year_title>2013</a><ul> <li><a href=/blog/hello-1.0.html>Release the Kraken! - Announcing Yeoman 1.0</a></li></ul></li></ul></nav><article class=main><section class=content-chunk><section><div class="blog-post-meta clearfix"><p class=date>14 Oct 2014</p><div class=social><a href=https://twitter.com/share class=twitter-share-button data-text="" data-url="">Tweet</a><script>!function(t,e,n){var o,i=t.getElementsByTagName(e)[0],r=/^http:/.test(t.location)?"http":"https";t.getElementById(n)||(o=t.createElement(e),o.id=n,o.src=r+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(o,i))}(document,"script","twitter-wjs");</script><script src=https://apis.google.com/js/plusone.js></script><g:plus action=share></g:plus></div></div><div class=post><p>Allo' Allo' today we're happy to announce the release of <a href=https://www.npmjs.com/package/yeoman-generator>yeoman-generator@0.18.0</a>!</p><p>It's been multiple months since our last minor version bump. This new release bring lots of new features and strive at improving the composability features (first introduced in 0.17).</p><h2>New features!</h2><h3>Storing prompt answers</h3><p>Using the <code>{store: true}</code> property on a prompt will store the user answers in a machine global storage. This mean next time the user run a generator, the default answer will be filled with the value previously stored.</p><p>Careful notice, providing a default value prevent user from returning empty answers.</p><p>Huge thanks to @stefanbuck for the PR https://github.com/yeoman/generator/pull/688</p><h3>New File System</h3><p>Since version 0.17, the Yeoman file system proved to be poorly designed to attack composability issues. That's why with 0.18 we release a completely rethought file system abstraction. You can see the discussion and design process <a href=https://github.com/yeoman/generator/issues/658>taking place in this issue</a>.</p><p>Every legacy methods (<code>this.write</code>, <code>this.copy</code>, <a href=http://yeoman.github.io/generator/actions.html>etc</a>) have been back ported to use this new system. So updating to 0.18.0 should magically improve your generator.</p><h4>New <code>fs</code> methods</h4><p>The core system can be accessed on <code>generator.fs</code>. This object is an instance of <a href=https://github.com/SBoudrias/mem-fs-editor>mem-fs-editor</a> and provide the same methods.</p><p>This system is way simpler than the current legacy method and doesn't do any kind of magic. It won't automatically compile templates (use <code>this.fs.copyTpl()</code> for this), it won't pass <code>this</code> as template context, and it won't automatically assume paths are relative to anything.</p><p>An example/usual usage would be:</p><div class=highlight><pre><code class=language-js data-lang=js><span class=k>this</span><span class=p>.</span><span class=nx>fs</span><span class=p>.</span><span class=nx>copyTpl</span><span class=p>(</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>templatePath</span><span class=p>(</span><span class=s1>'mocha/base-test.js'</span><span class=p>),</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>destinationPath</span><span class=p>(</span><span class=s1>'test/index.js'</span><span class=p>),</span>
  <span class=p>{</span> <span class=nx>projectName</span><span class=o>:</span> <span class=s1>'my-awesome-module'</span> <span class=p>}</span>
<span class=p>)</span>
</code></pre></div><p>As you can see, we also added two new paths helpers:</p><ol><li><code>this.templatePath()</code> which is: <code>path.join(this.sourceRoot(), ...rest)</code></li> <li><code>this.destinationPath()</code> which is: <code>path.join(this.destinationRoot(), ...rest)</code></li></ol><p>Try it out and please give us feedback on how you like this new API. It is more verbose than our legacy methods, but it is clearer and less magical.</p><p><em>Note that the legacy system will remain available at least until version 1.0.0</em></p><h4>What about the 0.17.0 <code>this.src</code> and <code>this.dest</code> file utils</h4><p>These should be considered deprecated. The design decision they make isn't a good fit with composability and will create issues on the long run.</p><h4>File writing filters</h4><p>Ever wished to apply custom filters on every file write? Beautifying files, normalizing whitespace, etc, is now possible.</p><p>Once per Yeoman process, we will write every modified files to disk. This process is passed through a <a href=https://github.com/wearefractal/vinyl>vinyl</a> object stream (just like <a href="http://gulpjs.com/">gulp</a>). Any author can register a <code>transformStream</code> to modify the file path or content.</p><p>For example:</p><div class=highlight><pre><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>beautify</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'gulp-beautify'</span><span class=p>);</span>
<span class=k>this</span><span class=p>.</span><span class=nx>registerTransformStream</span><span class=p>(</span><span class=nx>beautify</span><span class=p>({</span><span class=nx>indentSize</span><span class=o>:</span> <span class=mi>2</span> <span class=p>}));</span>
</code></pre></div><p>Note that <strong>every file type will be passed through this stream</strong>. So make sure any transform stream passthrough unsupported files. Tools like <a href=https://github.com/robrich/gulp-if>gulp-if</a> or <a href=https://github.com/sindresorhus/gulp-filter>gulp-filter</a> will help filter invalid type and pass them through.</p><p>This new feature means you can basically use any <em>gulp</em> plugins to process generated files during the writing phase.</p><h2>Improvements</h2><ul><li>Tests <a href=http://yeoman.io/authoring/testing.html>using <code>helpers.run()</code></a> won't output to the console keeping the test output clean. Every log method is now a <code>sinon.stub()</code> making it easy to assert your generator outputted the correct content.</li> <li>Testing run context now automatically run your tests in a unique tmpdir. No need to manually call <code>helper.run().inDir()</code> anymore.</li> <li><code>assert.fileContent</code> and <code>assert.noFileContent</code> accept a String as arguments (before we just accepted Regex)</li> <li>The Conflicter have been refactored to be simple and easy to use.</li></ul><h3>Installation methods only running once</h3><p><code>npm</code> and <code>bower</code> installation helpers are now always running once per process. This was a change made in 0.17, but we extended the feature to cover every use/methods who could launch these process.</p><p>This was a breaking an edge case in 0.17. But for the sake of clarity, let's be clear. The following construct will break:</p><div class=highlight><pre><code class=language-js data-lang=js><span class=k>this</span><span class=p>.</span><span class=nx>installDependencies</span><span class=p>({</span>
  <span class=nx>callback</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>async</span><span class=p>()</span> <span class=c1>// This will block the process forever, and node will fail</span>
<span class=p>});</span>
</code></pre></div><p>Every install method will be registered on the <a href=http://yeoman.io/authoring/running-context.html><code>install</code> run queue</a>. Using <code>this.async()</code> as a callback will create a deadlock.</p><h2>Fixes</h2><ul><li>Installation methods (npm, bower helpers) now correctly pass the options to the spawn process.</li> <li>When a conflict occurs on a directory, we don't show the <code>diff</code> option anymore. (selecting diff on directory threw an error)</li> <li>You can now correctly overwrite the <code>stdio</code> with <code>generator.spawnCommand()</code></li> <li><code>generator.composeWith()</code> now correctly resolve the <code>local</code> option path.</li></ul><h2>Meta</h2><ul><li>We've extracted <a href=https://github.com/yeoman/environment>yeoman-environment</a> on it's own repository. This mean these two core Yeoman parts can now evolve at their own pace.</li> <li>All our tests now uses tmpdir for testing making them more reliable.</li> <li>Completely remove network connection from our test suite - it is now way faster.</li></ul><h2>Potentially breaking change</h2><ul><li>We stopped manually mocking Inquirer in tests. Mainly because Inquirer parses values in ways we didn't imitate and this caused too much issue. Now we rely more on Inquirer and only mock the minimum. This also mean we don't create the magic <code>errors</code> property during test. You can listen for generator errors instead.</li> <li>We removed <code>require('yeoman-generator').inquirer</code>. Require your own version from now on.</li> <li>We removed <code>generator.shell</code> and <code>generator.request</code>. Require your own version.</li></ul><h2>In conclusion</h2><p>The work is still not completed. We still need to update some of our website documentation to include the new APIs methods. And we'll need to update our core generators to this new version. These should come soon, in the meantime refer to this post about the new features.</p><p>So, enjoy this new release! Please upgrade and let us know how the API feels, and as usual feel free to report any bug you encounter!</p><p>Cheers</p></div><hr><a href="/blog/">« View More Posts</a></section></section></article></div></div><footer class=page-footer><ul class="footer-links footer-links-social"><li><a href=https://plus.google.com/101063139999404044459/posts class=icon><img src=/static/social-gplus.cdac08228d.svg alt=Google+></a></li> <li><a href=https://twitter.com/yeoman class=icon><img src=/static/social-twitter.60eb981a15.svg alt=Twitter></a></li> <li><a href=https://github.com/yeoman/yeoman class=icon><img src=/static/social-github.767995ad17.svg alt=Github></a></li> <li><a href=/blog/atom.xml class=icon><img src=/static/social-feed.c635057faf.svg alt=Feed></a></li></ul><ul class="footer-links footer-links-contribute"><li><a href="http://yeoman.github.io/generator/" class=btn>API</a></li> <li><a href=https://github.com/yeoman/yeoman.io/blob/master/app/_posts/blog/2014-10-14-release-0.18.md class="btn btn-improve" title="Edit this page on Github to help improve the site">Improve this page</a></li></ul></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js></script><script src=/static/bundle-5392.12c59b403a.js async></script><script>!function(n,t,e){"undefined"!=typeof e.module&&e.module.exports?e.module.exports=t():"undefined"!=typeof e.define&&"function"==e.define&&e.define.amd?define(n,t):e[n]=t()}("$script",function(){function n(n,t){for(var e=0,o=n.length;o>e;++e)if(!t(n[e]))return l;return 1}function t(t,e){n(t,function(n){return!e(n)})}function e(r,c,l){function p(n){return n.call?n():u[n]}function g(){if(!--j){u[y]=1,v&&v();for(var e in s)n(e.split("|"),p)&&!t(s[e],p)&&(s[e]=[])}}r=r[m]?r:[r];var h=c&&c.call,v=h?c:l,y=h?r.join(""):c,j=r.length;return setTimeout(function(){t(r,function(n){return d[n]?(y&&(f[y]=1),2==d[n]&&g()):(d[n]=1,y&&(f[y]=1),o(!a.test(n)&&i?i+n+".js":n,g),void 0)})},0),e}function o(n,t){var e=r.createElement("script"),o=l;e.onload=e.onerror=e[v]=function(){e[g]&&!/^c|loade/.test(e[g])||o||(e.onload=e[v]=null,o=1,d[n]=2,t())},e.async=1,e.src=n,c.insertBefore(e,c.firstChild)}var i,r=document,c=r.getElementsByTagName("head")[0],a=/^https?:\/\//,u={},f={},s={},d={},l=!1,m="push",p="DOMContentLoaded",g="readyState",h="addEventListener",v="onreadystatechange";return!r[g]&&r[h]&&(r[h](p,function y(){r.removeEventListener(p,y,l),r[g]="complete"},l),r[g]="loading"),e.get=o,e.order=function(n,t,o){!function i(r){r=n.shift(),n.length?e(r,i):e(r,t,o)}()},e.path=function(n){i=n},e.ready=function(o,i,r){o=o[m]?o:[o];var c=[];return!t(o,function(n){u[n]||c[m](n)})&&n(o,function(n){return u[n]})?i():!function(n){s[n]=s[n]||[],s[n][m](i),r&&r(c)}(o.join("|")),e},e},this);var _gaq=[["_setAccount","UA-32956520-1"],["_setDomainName",".yeoman.io"],["_trackPageview"],["_trackPageLoadTime"]];$script("http://www.google-analytics.com/ga.js"),$script("https://apis.google.com/js/plusone.js"),$script("//platform.twitter.com/widgets.js");</script></body></html>